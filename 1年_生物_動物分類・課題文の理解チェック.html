<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>動物分類 課題文・理解チェック</title>
  <style>
    :root{
      --bg:#f7f7fb;--panel:#ffffff;--ink:#1f2937;--accent:#2563eb;--muted:#6b7280;--good:#059669;--bad:#dc2626;--warn:#d97706;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,"Hiragino Kaku Gothic ProN","Hiragino Sans","Noto Sans JP",Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.6}
    header{position:sticky;top:0;background:rgba(255,255,255,.9);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid #e5e7eb;z-index:20}
    .wrap{max-width:980px;margin:0 auto;padding:16px}
    h1{font-size:clamp(20px,2.6vw,28px);margin:8px 0}
    .panel{background:var(--panel);border:1px solid #e5e7eb;border-radius:16px;padding:16px;box-shadow:0 8px 24px rgba(0,0,0,.06)}
    details>summary{cursor:pointer;list-style:none;font-weight:600}
    details>summary::-webkit-details-marker{display:none}
    .btn{appearance:none;border:1px solid #c7d2fe;background:#eef2ff;color:#111827;border-radius:12px;padding:10px 14px;font-weight:600;cursor:pointer}
    .btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}
    .btn.good{background:var(--good);border-color:var(--good);color:#fff}
    .btn.bad{background:var(--bad);border-color:var(--bad);color:#fff}
    .btn.ghost{background:#fff;color:var(--ink)}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    .stack{display:grid;gap:12px}
    .q{padding:16px;border:1px solid #e5e7eb;border-radius:12px;background:#fff}
    .q h3{margin:0 0 8px;font-size:18px}
    .muted{color:var(--muted)}
    .badge{display:inline-block;padding:.1rem .5rem;border-radius:9999px;border:1px solid #e5e7eb;background:#f3f4f6;font-size:12px}
    .right{color:var(--good);font-weight:700}
    .wrong{color:var(--bad);font-weight:700}
    .hint{border-left:4px solid #93c5fd;background:#eff6ff;padding:8px 12px;border-radius:6px}
    .explain{border-left:4px solid #d1d5db;background:#f9fafb;padding:8px 12px;border-radius:6px}
    .scorebar{height:10px;background:#e5e7eb;border-radius:9999px;overflow:hidden}
    .scorebar>div{height:100%;background:linear-gradient(90deg,var(--accent),#10b981)}
    .footer{font-size:12px;color:var(--muted)}
    input[type="text"], textarea, select{width:100%;padding:10px;border:1px solid #d1d5db;border-radius:10px}
    label{display:block}
    .hidden{display:none}
    .pill{border:1px solid #e5e7eb;border-radius:9999px;padding:4px 10px;background:#fff}
  </style>
</head>
<body>
  <header>
    <div class="wrap row">
      <h1>動物分類・課題文の理解チェック</h1>
      <div class="pill">所要時間: 10–15分</div>
      <div class="pill">対象: 中学生</div>
    </div>
  </header>

  <main class="wrap stack" style="margin-top:12px">

    <section class="panel stack">
      <div class="row" style="justify-content:space-between">
        <div class="row" style="gap:8px">
          <label>名前（ニックネーム可）<input id="studentName" type="text" placeholder="例）佐藤 太郎"/></label>
          <label>学年<select id="grade">
            <option>中1</option><option>中2</option><option>中3</option>
          </select></label>
        </div>
        <div class="row">
          <button class="btn" id="togglePassage">本文を表示</button>
          <button class="btn ghost" id="shuffle">問題をシャッフル</button>
          <button class="btn primary" id="start">チェック開始</button>
        </div>
      </div>
      <details id="passage" class="panel" style="background:#fafafa;display:none">
        <summary>課題文（クリックで開閉）</summary>
        <div class="stack" style="margin-top:8px">
          <h2>どうして動物を「分ける」の？――よいところと、むずかしさ</h2>
          <p>私たちは、身の回りの動物に名前をつけて、仲間ごとに分けています。これを<strong>分類</strong>といいます。図鑑の目次や博物館の展示、ニュースの「外来生物」「絶滅危惧種」といった言葉のうしろには、必ず分類の考え方があります。では、なぜわざわざ分けるのでしょうか。分けると何がうれしくて、どんな困りごとがあるのでしょうか。中学生のみなさんにもわかる言葉で考えてみます。</p>
          <p>まず、分類には大きく三つの<strong>よいところ</strong>があります。 一つ目は、<strong>共通のことば</strong>ができることです。たとえば「この虫、アブかな？ハチかな？」と友だちと話すとき、名前がはっきりしていれば話が食いちがいません。世界中の人と情報をくらべるときは、ラテン語の<strong>学名</strong>も使います。どの国の人とも、同じ生き物の話ができる共通語です。 二つ目は、<strong>くらべやすく、予測もしやすい</strong>ことです。近い仲間は体のつくりや暮らし方が似ていることが多いので、「この仲間は夜に活動する」「この仲間は毒を持つ」など、まだ知らない性質も見通しが立ちます。たとえば、あるカの仲間が病気を運ぶとわかれば、その近い仲間にも注意できます。 三つ目は、<strong>自然を守るしくみが作れる</strong>ことです。「絶滅しそうな動物を守る」「外来生物の広がりを止める」には、まず“どこまでを同じグループとみなすか”という<strong>単位</strong>が必要です。分類は、保護区やルールを決めるための土台になります。</p>
          <p>しかし、分類には<strong>むずかしさ</strong>もあります。自然の世界は、教科書の表のようにきれいな線で区切れるわけではありません。 たとえば、<strong>見た目がほとんど同じなのに、実は別の仲間</strong>ということがあります。これを「隠れている種」と呼ぶことがあります。逆に、同じ種でも、<strong>オスとメス、子どもと大人、夏と冬</strong>で姿がかなり変わることもあり、見分けがやっかいです。カモのオスは夏に地味な羽色になるので、冬の図鑑写真だけを見ると迷う人もいます。 また、<strong>遠い仲間どうしでも、似た環境だと似た形になる</strong>ことがあります（たとえば、魚とイルカは体の形がそっくりですが、イルカは哺乳類です）。見た目だけで判断すると、間違えることがあるのです。 さらに、<strong>近い種どうしが交ざる</strong>こともあります。野外ではカモ類などでよく見つかります。境界がぼんやりして、「ここからがAで、ここからがB」とはっきり言い切れない場合があるのです。</p>
          <p>では、どうやって見分ければよいのでしょう。最近は、<strong>DNA（遺伝子）の情報</strong>や、川や池の水にまざった生き物の痕跡から調べる方法（<strong>環境DNA</strong>）が使われるようになりました。スマホの写真から種類の候補を出してくれる<strong>AI</strong>もあります。これらは強力な道具ですが、<strong>まちがいがゼロではない</strong>ことに注意がいります。写真が暗い、角度が変、データが少ないグループ、などの理由で誤りが起こることがあります。だからこそ、<strong>見た目・すむ場所・行動・鳴き声・DNA</strong>など、複数の証拠を<strong>合わせて</strong>考える姿勢が大切です。</p>
          <p>もう一つ、分類には<strong>言葉の力</strong>という面もあります。「害獣」「外来」といった言い方は、対策を急ぐときには役立ちますが、同時に強い印象を与える言葉でもあります。そのラベルが一人歩きして、「悪いもの」「すぐに排除すべきもの」と短く決めつけてしまう危険があります。本当にその地域の自然にどんな影響があるのか、いつ、どのようにしてやって来たのか、背景を確かめながら、公平に判断する目が必要です。</p>
          <p>ここまでをまとめると、分類は<strong>自然の地図</strong>のようなものです。地図があると目的地にたどり着きやすくなりますが、地図は現実そのものではありません。新しい情報が見つかれば、地図は更新されます。ある動物を細かく分けるべきか、まとまりとして扱うべきかは、目的によっても変わります。進化のなかま関係を知りたいのか、安全対策をしたいのか、保全の優先順位を決めたいのか、学校で学びやすくしたいのか――目的に合わせて、ちょうどよい縮尺の地図を選ぶことが大切です。</p>
          <p>最後に、みなさんに問いをわたします。身近な生き物を一つ選び、その近い仲間を三つ調べてみてください。どこが似ていて、どこがちがうでしょう。もし友だちにそのちがいを説明するなら、どんな証拠を見せますか。見た目だけでなく、すむ場所、行動、鳴き声、そして可能ならDNAの情報にも目を向けると、今まで見えなかった世界が見えてきます。 分類は、私たちが自然を知り、伝え、守るための道具です。道具は正しく使ってこそ力を発揮します。何のために分けるのかを忘れず、複数の証拠を合わせて考え、言葉の使い方にも気を配る――その姿勢こそが、よりよい“地図作り”への第一歩なのです。</p>
        </div>
      </details>
    </section>

    <section id="quiz" class="stack"></section>

    <section id="actions" class="panel row" style="justify-content:space-between;align-items:center">
      <div class="row" style="gap:8px">
        <button class="btn primary" id="submit">採点する</button>
        <button class="btn" id="retry">やり直す</button>
        <button class="btn" id="export">結果をCSV保存</button>
        <button class="btn" id="print">印刷</button>
      </div>
      <div class="scorebar" style="min-width:240px"><div id="scorebar" style="width:0%"></div></div>
    </section>

    <section id="result" class="panel hidden"></section>

    <details class="panel">
      <summary>先生向けオプション（クリックで開閉）</summary>
      <div class="stack" style="margin-top:8px">
        <div class="row"><label>先生コード<input id="teacherCode" type="text" placeholder="teacher" style="max-width:200px"></label><button class="btn" id="reveal">解答を表示</button></div>
        <div id="answerKey" class="hidden"></div>
      </div>
    </details>

    <div class="footer">© 2025 動物分類・理解チェック | ローカルで動作する単一HTMLファイルです。</div>
  </main>

  <script>
    // ---------- Utility ----------
    const el = (tag, attrs={}, children=[])=>{
      const node = document.createElement(tag);
      for(const k in attrs){
        if(k==='class') node.className = attrs[k];
        else if(k==='html') node.innerHTML = attrs[k];
        else node.setAttribute(k, attrs[k]);
      }
      (Array.isArray(children)?children:[children]).filter(Boolean).forEach(c=>{
        if(typeof c==='string') node.appendChild(document.createTextNode(c));
        else node.appendChild(c);
      });
      return node;
    };
    const shuffleArr = arr => arr.map(v=>({v, r:Math.random()})).sort((a,b)=>a.r-b.r).map(o=>o.v);
    const norm = s => (s||'').toString().trim().replace(/[\s\u3000]/g,'').replace(/[。、．，・,.!！?？\-―—]/g,'').toLowerCase();

    // ---------- Question bank ----------
    // Types: single, multi, tf, short, match
    const QUESTIONS = [
      {
        id:'q1', type:'single', points:8,
        text:'分類を行う主な利点として最も適切なものはどれ？',
        choices:[
          '世界共通のことば（学名）で正確に伝えられる',
          'どんな場合でも1度決めた分類は変わらない',
          '見た目が同じなら必ず同じ仲間にできる',
          '外来と呼べば必ず駆除してよい'
        ],
        correct:0,
        explain:'課題文の「共通のことば」「学名」に対応。分類は更新され得るし、見た目のみで決めつけない。'
      },
      {
        id:'q2', type:'multi', points:12,
        text:'本文で挙げられた「分類のよいところ」をすべて選ぼう（複数選択）',
        choices:[
          '共通のことばができる',
          'くらべやすく予測しやすい',
          '自然を守るしくみが作れる',
          'いつでもAIが正解を出す'
        ],
        correct:[0,1,2],
        explain:'AIは便利だが誤りがゼロではない、と本文にある。'
      },
      {
        id:'q3', type:'tf', points:6,
        text:'分類は「自然そのもの」であり、更新されることはない。',
        correct:false,
        explain:'「地図」のたとえ。新しい情報で更新されると述べている。'
      },
      {
        id:'q4', type:'tf', points:6,
        text:'遠い仲間どうしでも、似た環境だと似た形になることがある（収斂）。',
        correct:true,
        explain:'魚とイルカの例。見た目だけに頼らない姿勢が必要。'
      },
      {
        id:'q5', type:'single', points:8,
        text:'本文の「強い言葉」に当てはまる組み合わせはどれ？',
        choices:[
          '害獣／外来',
          '進化／DNA',
          '地図／縮尺',
          '保護区／図鑑'
        ],
        correct:0,
        explain:'「害獣」「外来」はラベルが一人歩きしやすいと注意喚起。'
      },
      {
        id:'q6', type:'match', points:12,
        text:'用語と説明を対応させよう',
        pairs:[
          ['学名','世界共通で同じ生物を指すための名前'],
          ['環境DNA','水や土などから生物の痕跡を調べる方法'],
          ['隠れている種（隠蔽種）','見た目は似ているが遺伝的に別の仲間'],
          ['収斂','遠い仲間でも環境が似ると形が似てくること']
        ],
        explain:'本文で解説された4用語。すべてマッチできれば満点。'
      },
      {
        id:'q7', type:'short', points:8,
        text:'本文のたとえでは、分類は何に例えられていましたか？（ひらがな/漢字どちらでも）',
        keywords:[['地図','ちず']],
        explain:'「分類は自然の地図のようなもの」。'
      },
      {
        id:'q8', type:'short', points:10,
        text:'本文で注意が必要だとされた「強い言葉」を二つ書こう（例：「＿＿」「＿＿」）。',
        keywords:[['害獣'],['外来']], minHits:2,
        explain:'「害獣」「外来」の2語。順不同・全角半角は不問（簡易判定）。'
      },
      {
        id:'q9', type:'short', points:10,
        text:'「見分けるときは複数の証拠を合わせる」理由を、本文の表現を用いて30〜60字で説明しよう。',
        rubric: '30〜60字／「AIや見た目だけでは誤り」「写真条件やデータ不足」などの言及があると加点。',
        keywords:[['見た目'],['DNA','環境DNA'],['AI','誤り','まちがい','データ','写真']], minHits:2,
        explain:'見た目単独やAI単独は誤りがあり得る→複数の証拠を合わせる。'
      },
      {
        id:'q10', type:'single', points:10,
        text:'本文にある「目的によってちょうどよい分け方が変わる」理由として最も近いものは？',
        choices:[
          '分類は数学と同じで唯一の正解があるから',
          '安全対策、保全、学習など目的ごとに必要な情報がちがうから',
          'AIが求めるデータ形式が毎年変わるから',
          '図鑑のページ数に限りがあるから'
        ],
        correct:1,
        explain:'本文末の「目的に合わせて縮尺を選ぶ」に対応。'
      }
    ];

    // ---------- Render ----------
    let order = [...Array(QUESTIONS.length).keys()];
    const quizEl = document.getElementById('quiz');

    function render(){
      quizEl.innerHTML='';
      order.forEach(idx=>{
        const q = QUESTIONS[idx];
        const card = el('div',{class:'q stack', id:q.id});
        card.appendChild(el('div',{class:'row',html:`<h3>Q${order.indexOf(idx)+1}. ${q.text}</h3><span class="badge">${q.points}点</span>`}));

        if(q.type==='single'){
          q.choices.forEach((c,i)=>{
            const id = q.id+'_'+i;
            const opt = el('label',{},[
              el('input',{type:'radio',name:q.id,value:i,id}),
              ' ', c
            ]);
            card.appendChild(opt);
          });
        }
        if(q.type==='multi'){
          q.choices.forEach((c,i)=>{
            const id = q.id+'_'+i;
            const opt = el('label',{},[
              el('input',{type:'checkbox',name:q.id,value:i,id}),
              ' ', c
            ]);
            card.appendChild(opt);
          });
          card.appendChild(el('div',{class:'hint muted',html:'※ 複数選択可'}));
        }
        if(q.type==='tf'){
          const row = el('div',{class:'row'});
          ['正しい','誤り'].forEach((lab,i)=>{
            const id = q.id+'_'+i;
            row.appendChild(el('label',{},[
              el('input',{type:'radio',name:q.id,value:i===0?'true':'false',id}),
              ' ', lab
            ]));
          });
          card.appendChild(row);
        }
        if(q.type==='match'){
          q.pairs.forEach(([term,desc],i)=>{
            const row = el('div',{class:'row'});
            row.appendChild(el('div',{style:'min-width:140px;font-weight:600'},term));
            const sel = el('select',{name:q.id});
            sel.appendChild(el('option',{value:'',disabled:'',selected:''},'選択'));
            shuffleArr(q.pairs.map(p=>p[1])).forEach(d=>{
              sel.appendChild(el('option',{value:d},d));
            });
            row.appendChild(sel);
            card.appendChild(row);
          });
        }
        if(q.type==='short'){
          const ta = el('textarea',{rows: q.keywords && q.keywords.length<=2 ? 1 : 3, placeholder:'ここに回答を書こう'});
          ta.dataset.qid = q.id;
          card.appendChild(ta);
          if(q.rubric) card.appendChild(el('div',{class:'muted',html:'評価のめやす：'+q.rubric}));
        }

        // feedback area
        card.appendChild(el('div',{class:'explain hidden',id:q.id+'_fb'}));
        quizEl.appendChild(card);
      });
    }

    render();

    // ---------- Evaluate ----------
    function evaluate(){
      let total=0, earned=0; const perQ=[];
      order.forEach(idx=>{
        const q = QUESTIONS[idx];
        total += q.points;
        let got=0, max=q.points, ok=false, fb='';
        if(q.type==='single'){
          const checked = [...document.querySelectorAll(`#${q.id} input[type=radio]:checked`)].map(i=>+i.value)[0];
          ok = (checked===q.correct);
          got = ok?max:0;
          fb = ok?`<span class='right'>正解！</span>`:`<span class='wrong'>不正解</span>（正解：${q.choices[q.correct]}）`;
        }
        if(q.type==='multi'){
          const checked = [...document.querySelectorAll(`#${q.id} input[type=checkbox]:checked`)].map(i=>+i.value);
          const need = q.correct.slice().sort().join(',');
          const you = checked.slice().sort().join(',');
          ok = (need===you);
          // 部分点（正しい選択=+、誤選択=-）
          const tp = checked.filter(i=>q.correct.includes(i)).length;
          const fp = checked.filter(i=>!q.correct.includes(i)).length;
          const fn = q.correct.filter(i=>!checked.includes(i)).length;
          const ratio = Math.max(0,(tp - fp) / q.correct.length);
          got = Math.round(max * (ok?1:ratio));
          fb = ok?`<span class='right'>満点！</span>`:`<span class='wrong'>部分正解</span>（必要：${q.correct.map(i=>q.choices[i]).join('、')}）`;
        }
        if(q.type==='tf'){
          const v = (document.querySelector(`#${q.id} input[type=radio]:checked`)||{}).value;
          ok = (String(q.correct)===v);
          got = ok?max:0;
          fb = ok?`<span class='right'>正解！</span>`:`<span class='wrong'>不正解</span>`;
        }
        if(q.type==='match'){
          const selects = [...document.querySelectorAll(`#${q.id} select`)];
          const totalPairs = q.pairs.length;
          let correctCnt = 0;
          selects.forEach((sel,i)=>{
            const term = q.pairs[i][0];
            const should = q.pairs[i][1];
            if(sel.value===should) correctCnt++;
          });
          const ratio = correctCnt/totalPairs;
          got = Math.round(max*ratio);
          ok = (ratio===1);
          fb = ok?`<span class='right'>全問正解！</span>`:`<span class='wrong'>${correctCnt}/${totalPairs} 個一致</span>`;
        }
        if(q.type==='short'){
          const val = (document.querySelector(`#${q.id} textarea`)||{}).value || '';
          const N = (q.minHits || 1);
          let hits=0;
          const nv = norm(val);
          (q.keywords||[]).forEach(group=>{
            if(group.some(k=>nv.includes(norm(k)))) hits++;
          });
          ok = hits>=N;
          // 簡易配点：ヒット数/必要数
          const ratio = Math.min(1, hits / N);
          got = Math.round(max*ratio*0.9 + (ok?max*0.1:0));
          fb = ok?`<span class='right'>おおむねOK</span>`:`<span class='wrong'>キーワード不足</span>`;
        }
        earned += got;
        const fbBox = document.getElementById(q.id+'_fb');
        fbBox.classList.remove('hidden');
        fbBox.innerHTML = `${fb}<div class='muted' style='margin-top:6px'>解説：${q.explain||''}</div>`;
        perQ.push({id:q.id, got, max, ok});
      });

      const pct = Math.round(earned/total*100);
      document.getElementById('scorebar').style.width = pct+'%';

      const name = (document.getElementById('studentName').value||'未入力');
      const grade = document.getElementById('grade').value;
      const report = el('div',{class:'stack'});
      report.appendChild(el('h2', {html:`スコア：${pct} 点（${earned}/${total}）`}));
      report.appendChild(el('div',{class:'muted'},`氏名：${name} ／ 学年：${grade} ／ 日時：${new Date().toLocaleString()}`));

      // 簡易フィードバック
      let tips = [];
      if(pct<60) tips.push('本文の「地図のたとえ」と「強い言葉（害獣・外来）」の段落を読み直そう。');
      if(pct>=60 && pct<80) tips.push('用語の対応（学名・環境DNA・隠蔽種・収斂）をもう一度確認しよう。');
      if(pct>=80) tips.push('とてもよく理解できています。自分の身近な具体例を1つ調べてみよう。');
      report.appendChild(el('div',{class:'hint'},tips.join(' ')));

      const resultArea = document.getElementById('result');
      resultArea.classList.remove('hidden');
      resultArea.innerHTML = '';
      resultArea.appendChild(report);

      // 保存
      const attempt = {name, grade, earned, total, pct, time:new Date().toISOString(), perQ};
      const key='classification_quiz_attempts';
      const arr = JSON.parse(localStorage.getItem(key)||'[]');
      arr.push(attempt); localStorage.setItem(key, JSON.stringify(arr));
    }

    // ---------- Export CSV ----------
    function exportCSV(){
      const key='classification_quiz_attempts';
      const arr = JSON.parse(localStorage.getItem(key)||'[]');
      if(arr.length===0){ alert('保存された結果がありません。'); return; }
      const header = ['name','grade','score','total','percent','time','per_item'];
      const rows = arr.map(a=>[
        a.name, a.grade, a.earned, a.total, a.pct, a.time,
        a.perQ.map(p=>`${p.id}:${p.got}/${p.max}`).join('|')
      ]);
      const csv = [header.join(','), ...rows.map(r=>r.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(','))].join('\n');
      const blob = new Blob([csv],{type:'text/csv;charset=utf-8;'});
      const url = URL.createObjectURL(blob);
      const a = el('a',{href:url,download:'動物分類_理解チェック結果.csv'});
      document.body.appendChild(a); a.click(); URL.revokeObjectURL(url); a.remove();
    }

    // ---------- Answer key (teacher) ----------
    function showAnswerKey(){
      const code = document.getElementById('teacherCode').value.trim();
      if(code!=='' && code!=='teacher'){ alert('コードが違います。デフォルトは teacher です。'); return; }
      const box = document.getElementById('answerKey');
      box.classList.remove('hidden');
      box.innerHTML = '';
      QUESTIONS.forEach((q,i)=>{
        const div = el('div',{class:'q'});
        div.appendChild(el('div',{html:`<strong>Q${i+1}</strong>：${q.text}`}));
        let ans='';
        if(q.type==='single') ans = q.choices[q.correct];
        if(q.type==='multi') ans = q.correct.map(i=>q.choices[i]).join('／');
        if(q.type==='tf') ans = q.correct? '正しい':'誤り';
        if(q.type==='match') ans = q.pairs.map(([t,d])=>`${t} → ${d}`).join(' ／ ');
        if(q.type==='short') ans = (q.keywords||[]).map(group=>group.join('・')).join(' ／ ');
        div.appendChild(el('div',{class:'muted'},'模範解答：'+ans));
        div.appendChild(el('div',{class:'explain'},'解説：'+(q.explain||'')));
        box.appendChild(div);
      });
    }

    // ---------- Events ----------
    document.getElementById('start').addEventListener('click', ()=>{
      window.scrollTo({top:quizEl.offsetTop-60, behavior:'smooth'});
    });
    document.getElementById('togglePassage').addEventListener('click', ()=>{
      const p = document.getElementById('passage');
      p.style.display = (p.style.display==='none')? 'block':'none';
    });
    document.getElementById('shuffle').addEventListener('click', ()=>{
      order = shuffleArr(order); render();
    });
    document.getElementById('submit').addEventListener('click', evaluate);
    document.getElementById('retry').addEventListener('click', ()=>{ render(); document.getElementById('result').classList.add('hidden'); document.getElementById('scorebar').style.width='0%'; });
    document.getElementById('export').addEventListener('click', exportCSV);
    document.getElementById('print').addEventListener('click', ()=>window.print());
    document.getElementById('reveal').addEventListener('click', showAnswerKey);
  </script>
</body>
</html>
